<p>The <code>SetHoldings</code> method uses market order to reach the target portfolio weight you provide. If you want to use a different order type, you need to specify the quantity to trade. To calculate the number of units to trade based on a portfolio weight, call the <code>CalculateOrderQuantity</code> method. The method calculates the quantity based on the current price of the asset and adjusts it for the <a href='/docs/v2/writing-algorithms/reality-modeling/transaction-fees/key-concepts'>fee model</a> of the security. The target weight you provide is an unleveraged value. For instance, if you have 2x leverage and request a 100% weight, the method calculates the quantity that uses half of your available margin.</p>

<div class="section-example-container">
<pre class="csharp">// Calculate the fee-adjusted quantity of shares with given buying power
var quantity = CalculateOrderQuantity("IBM", 0.4);
</pre>
<pre class="python"> # Calculate the fee-adjusted quantity of shares with given buying power
quantity = self.CalculateOrderQuantity("IBM", 0.4)
</pre>
</div>
