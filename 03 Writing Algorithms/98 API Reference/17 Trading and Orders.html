<h4 id="Trading and Orders">Trading and Orders</h4>
<div class="code-snippet"><code>buy(<span class="object-type">strategy, quantity, asynchronous=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L751">[source]</a></div>
<div class="subsection-content">
<p>Buy Stock (Alias of Order)</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">strategy</span> (<span class="object-type"><a href="#OptionStrategy">OptionStrategy</a></span>) &mdash; Specification of the strategy to trade
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int</span>) &mdash; Quantity of the strategy to trade
    </li>
    <li>
    <span class="arg-name">asynchronous</span> (<span class="object-type">bool, optional</span>) &mdash; Send the order asynchronously (false). Otherwise we'll block until it fills
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sequence of order tickets</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[OrderTicket]</p>
</div>

<div class="code-snippet"><code>buy(<span class="object-type">symbol, quantity</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L50">[source]</a></div>
<div class="subsection-content">
<p>Buy Stock (Alias of Order)</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; string Symbol of the asset to trade
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; int Quantity of the asset to trade
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>calculate_order_quantity(<span class="object-type">symbol, target</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L1448">[source]</a></div>
<div class="subsection-content">
<p>Calculate the order quantity to achieve target-percent holdings.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; Security object we're asking for
    </li>
    <li>
    <span class="arg-name">target</span> (<span class="object-type">float</span>) &mdash; Target percentage holdings
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">Order quantity to achieve this percentage</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">float</p>
</div>

<div class="code-snippet"><code>combo_leg_limit_order(<span class="object-type">legs, quantity, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L811">[source]</a></div>
<div class="subsection-content">
<p>Issue a combo leg limit order/trade for multiple assets, each having its own limit price.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">legs</span> (<span class="object-type">List[Leg]</span>) &mdash; The list of legs the order consists of
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int</span>) &mdash; The total quantity for the order
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sequence of order tickets, one for each leg</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[OrderTicket]</p>
</div>

<div class="code-snippet"><code>combo_limit_order(<span class="object-type">legs, quantity, limit_price, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L833">[source]</a></div>
<div class="subsection-content">
<p>Issue a combo limit order/trade for multiple assets. A single limit price is defined for the combo order and will fill only if the sum of the assets price compares properly to the limit price, depending on the direction.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">legs</span> (<span class="object-type">List[Leg]</span>) &mdash; The list of legs the order consists of
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int</span>) &mdash; The total quantity for the order
    </li>
    <li>
    <span class="arg-name">limit_price</span> (<span class="object-type">float</span>) &mdash; The compound limit price to use for a ComboLimit order. This limit price will compared to the sum of the assets price in order to fill the order.
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sequence of order tickets, one for each leg</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[OrderTicket]</p>
</div>

<div class="code-snippet"><code>combo_market_order(<span class="object-type">legs, quantity, asynchronous=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L796">[source]</a></div>
<div class="subsection-content">
<p>Issue a combo market order/trade for multiple assets</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">legs</span> (<span class="object-type">List[Leg]</span>) &mdash; The list of legs the order consists of
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int</span>) &mdash; The total quantity for the order
    </li>
    <li>
    <span class="arg-name">asynchronous</span> (<span class="object-type">bool, optional</span>) &mdash; Send the order asynchronously (false). Otherwise we'll block until it fills
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sequence of order tickets, one for each leg</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[OrderTicket]</p>
</div>

<div class="code-snippet"><code>exercise_option(<span class="object-type">option_symbol, quantity, asynchronous=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L712">[source]</a></div>
<div class="subsection-content">
<p>Send an exercise order to the transaction handler</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">option_symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; String symbol for the option position
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int</span>) &mdash; Quantity of options contracts
    </li>
    <li>
    <span class="arg-name">asynchronous</span> (<span class="object-type">bool, optional</span>) &mdash; Send the order asynchronously (false). Otherwise we'll block until it fills
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>is_market_open(<span class="object-type">symbol</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L1525">[source]</a></div>
<div class="subsection-content">
<p>Determines if the exchange for the specified symbol is open at the current time.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; The symbol
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">True if the exchange is considered open at the current time, false otherwise</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>limit_if_touched_order(<span class="object-type">symbol, quantity, trigger_price, limit_price, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L662">[source]</a></div>
<div class="subsection-content">
<p>Send a limit if touched order to the transaction handler:</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; String symbol for the asset
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; Quantity of shares for limit order
    </li>
    <li>
    <span class="arg-name">trigger_price</span> (<span class="object-type">float</span>) &mdash; Trigger price for this order
    </li>
    <li>
    <span class="arg-name">limit_price</span> (<span class="object-type">float</span>) &mdash; Limit price to fill this order
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>limit_order(<span class="object-type">symbol, quantity, limit_price, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L392">[source]</a></div>
<div class="subsection-content">
<p>Send a limit order to the transaction handler:</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; String symbol for the asset
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; Quantity of shares for limit order
    </li>
    <li>
    <span class="arg-name">limit_price</span> (<span class="object-type">float</span>) &mdash; Limit price to fill this order
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>liquidate(<span class="object-type">symbol_to_liquidate=None, tag=Liquidated</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L1207">[source]</a></div>
<div class="subsection-content">
<p>Liquidate all holdings and cancel open orders. Called at the end of day for tick-strategies.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol_to_liquidate</span> (<span class="object-type"><a href="#Symbol">Symbol</a>, optional</span>) &mdash; Symbols we wish to liquidate
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Custom tag to know who is calling this.
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">Array of order ids for liquidated symbols</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[int]</p>
</div>

<div class="code-snippet"><code>market_on_close_order(<span class="object-type">symbol, quantity, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L343">[source]</a></div>
<div class="subsection-content">
<p>Market on close order implementation: Send a market order when the exchange closes</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; The symbol to be ordered
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; The number of shares to required
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Place a custom order property or tag (e.g. indicator data).
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>market_on_open_order(<span class="object-type">symbol, quantity, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L295">[source]</a></div>
<div class="subsection-content">
<p>Market on open order implementation: Send a market order when the exchange opens</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; The symbol to be ordered
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; The number of shares to required
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Place a custom order property or tag (e.g. indicator data).
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>market_order(<span class="object-type">symbol, quantity, asynchronous=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L207">[source]</a></div>
<div class="subsection-content">
<p>Market order implementation: Send a market order and wait for it to be filled.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; Symbol of the MarketType Required.
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; Number of shares to request.
    </li>
    <li>
    <span class="arg-name">asynchronous</span> (<span class="object-type">bool, optional</span>) &mdash; Send the order asynchronously (false). Otherwise we'll block until it fills
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Place a custom order property or tag (e.g. indicator data).
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>market_order(<span class="object-type">security, quantity, asynchronous=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L253">[source]</a></div>
<div class="subsection-content">
<p>Market order implementation: Send a market order and wait for it to be filled.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">security</span> (<span class="object-type"><a href="#Security">Security</a></span>) &mdash; Symbol of the MarketType Required.
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">float</span>) &mdash; Number of shares to request.
    </li>
    <li>
    <span class="arg-name">asynchronous</span> (<span class="object-type">bool, optional</span>) &mdash; Send the order asynchronously (false). Otherwise we'll block until it fills
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Place a custom order property or tag (e.g. indicator data).
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>on_assignment_order_event(<span class="object-type">assignment_event</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1173">[source]</a></div>
<div class="subsection-content">
<p>Option assignment event handler. On an option assignment event for short legs the resulting information is passed to this method.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">assignment_event</span> (<span class="object-type"><a href="#OrderEvent">OrderEvent</a></span>) &mdash; Option exercise event details containing details of the assignment
    </li>
</ul>

</div>

<div class="code-snippet"><code>on_order_event(<span class="object-type">order_event</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1162">[source]</a></div>
<div class="subsection-content">
<p>Order fill event handler. On an order fill update the resulting information is passed to this method.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">order_event</span> (<span class="object-type"><a href="#OrderEvent">OrderEvent</a></span>) &mdash; Order event details containing details of the events
    </li>
</ul>

</div>

<div class="code-snippet"><code>order(<span class="object-type">strategy, quantity, asynchronous=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L781">[source]</a></div>
<div class="subsection-content">
<p>Issue an order/trade for asset: Alias wrapper for Order(string, int);</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">strategy</span> (<span class="object-type"><a href="#OptionStrategy">OptionStrategy</a></span>) &mdash; Specification of the strategy to trade
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int</span>) &mdash; Quantity of the strategy to trade
    </li>
    <li>
    <span class="arg-name">asynchronous</span> (<span class="object-type">bool, optional</span>) &mdash; Send the order asynchronously (false). Otherwise we'll block until it fills
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sequence of order tickets</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[OrderTicket]</p>
</div>

<div class="code-snippet"><code>order(<span class="object-type">symbol, quantity, asynchronous=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L192">[source]</a></div>
<div class="subsection-content">
<p>Issue an order/trade for asset: Alias wrapper for Order(string, int);</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; Symbol of the MarketType Required.
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; Number of shares to request.
    </li>
    <li>
    <span class="arg-name">asynchronous</span> (<span class="object-type">bool, optional</span>) &mdash; Send the order asynchronously (false). Otherwise we'll block until it fills
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Place a custom order property or tag (e.g. indicator data).
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>sell(<span class="object-type">strategy, quantity, asynchronous=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L766">[source]</a></div>
<div class="subsection-content">
<p>Sell stock (alias of Order)</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">strategy</span> (<span class="object-type"><a href="#OptionStrategy">OptionStrategy</a></span>) &mdash; Specification of the strategy to trade
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int</span>) &mdash; Quantity of the strategy to trade
    </li>
    <li>
    <span class="arg-name">asynchronous</span> (<span class="object-type">bool, optional</span>) &mdash; Send the order asynchronously (false). Otherwise we'll block until it fills
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">Sequence of order tickets</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">List[OrderTicket]</p>
</div>

<div class="code-snippet"><code>sell(<span class="object-type">symbol, quantity</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L103">[source]</a></div>
<div class="subsection-content">
<p>Sell stock (alias of Order)</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; string Symbol of the asset to trade
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; int Quantity of the asset to trade
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>set_benchmark(<span class="object-type">benchmark</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Python.cs#L1169">[source]</a></div>
<div class="subsection-content">
<p>Sets the benchmark used for computing statistics of the algorithm to the specified symbol</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">benchmark</span> (<span class="object-type">PyObject | Callable[datetime, float]</span>) &mdash; The benchmark producing function
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_benchmark(<span class="object-type">ticker</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1384">[source]</a></div>
<div class="subsection-content">
<p>Sets the benchmark used for computing statistics of the algorithm to the specified symbol</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">ticker</span> (<span class="object-type">str</span>) &mdash; Ticker to use as the benchmark
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_benchmark(<span class="object-type">symbol</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1413">[source]</a></div>
<div class="subsection-content">
<p>Sets the benchmark used for computing statistics of the algorithm to the specified symbol</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; symbol to use as the benchmark
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_holdings(<span class="object-type">symbol, percentage, liquidate_existing_holdings=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L1326">[source]</a></div>
<div class="subsection-content">
<p>Sets holdings for a collection of targets. The implementation will order the provided targets executing first those that reduce a position, freeing margin.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; string symbol we wish to hold
    </li>
    <li>
    <span class="arg-name">percentage</span> (<span class="object-type">int | float</span>) &mdash; double percentage of holdings desired
    </li>
    <li>
    <span class="arg-name">liquidate_existing_holdings</span> (<span class="object-type">bool, optional</span>) &mdash; liquidate existing holdings if necessary to hold this stock
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Tag the order with a short string.
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_holdings(<span class="object-type">targets, liquidate_existing_holdings=False, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L1299">[source]</a></div>
<div class="subsection-content">
<p>Sets holdings for a collection of targets. The implementation will order the provided targets executing first those that reduce a position, freeing margin.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">targets</span> (<span class="object-type">List[PortfolioTarget]</span>) &mdash; The portfolio desired quantities as percentages
    </li>
    <li>
    <span class="arg-name">liquidate_existing_holdings</span> (<span class="object-type">bool, optional</span>) &mdash; True will liquidate existing holdings
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Tag the order with a short string.
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_maximum_orders(<span class="object-type">max</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L1280">[source]</a></div>
<div class="subsection-content">
<p>Maximum number of orders for the algorithm</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">max</span> (<span class="object-type">int</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>set_trade_builder(<span class="object-type">trade_builder</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1801">[source]</a></div>
<div class="subsection-content">
<p>Set the ITradeBuilder implementation to generate trades from executions and market price updates</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">trade_builder</span> (<span class="object-type">ITradeBuilder</span>)
    </li>
</ul>

</div>

<div class="code-snippet"><code>shortable(<span class="object-type">symbol, short_quantity, update_order_id=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L3096">[source]</a></div>
<div class="subsection-content">
<p>Determines if the Symbol is shortable at the brokerage</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; Symbol to check if shortable
    </li>
    <li>
    <span class="arg-name">short_quantity</span> (<span class="object-type">float</span>) &mdash; Order's quantity to check if it is currently shortable, taking into account current holdings and open orders
    </li>
    <li>
    <span class="arg-name">update_order_id</span> (<span class="object-type">int, optional</span>) &mdash; Optionally the id of the order being updated. When updating an order  we want to ignore it's submitted short quantity and use the new provided quantity to determine if we  can perform the update
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">True if the symbol can be shorted by the requested quantity</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">bool</p>
</div>

<div class="code-snippet"><code>shortable_quantity(<span class="object-type">symbol</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L3129">[source]</a></div>
<div class="subsection-content">
<p>Gets the quantity shortable for the given asset</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">  Quantity shortable for the given asset. Zero if not  shortable, or a number greater than zero if shortable.  </p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">int</p>
</div>

<div class="code-snippet"><code>stop_limit_order(<span class="object-type">symbol, quantity, stop_price, limit_price, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L611">[source]</a></div>
<div class="subsection-content">
<p>Send a stop limit order to the transaction handler:</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; String symbol for the asset
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; Quantity of shares for limit order
    </li>
    <li>
    <span class="arg-name">stop_price</span> (<span class="object-type">float</span>) &mdash; Stop price for this order
    </li>
    <li>
    <span class="arg-name">limit_price</span> (<span class="object-type">float</span>) &mdash; Limit price to fill this order
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; String tag for the order (optional)
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>stop_market_order(<span class="object-type">symbol, quantity, stop_price, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L440">[source]</a></div>
<div class="subsection-content">
<p>Create a stop market order and return the newly created order id; or negative if the order is invalid</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; String symbol for the asset we're trading
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; Quantity to be traded
    </li>
    <li>
    <span class="arg-name">stop_price</span> (<span class="object-type">float</span>) &mdash; Price to fill the stop order
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; Optional string data tag for the order
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>)
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>submit_order_request(<span class="object-type">request</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L961">[source]</a></div>
<div class="subsection-content">
<p>Will submit an order request to the algorithm</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">request</span> (<span class="object-type"><a href="#SubmitOrderRequest">SubmitOrderRequest</a></span>) &mdash; The request to submit
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><code>trailing_stop_order(<span class="object-type">symbol, quantity, stop_price, trailing_amount, trailing_as_percentage, tag=, order_properties=None</span>)</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L547">[source]</a></div>
<div class="subsection-content">
<p>Create a trailing stop order and return the newly created order id; or negative if the order is invalid. It will calculate the stop price using the trailing amount and the current market price.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">symbol</span> (<span class="object-type"><a href="#Symbol">Symbol</a></span>) &mdash; Trading asset symbol
    </li>
    <li>
    <span class="arg-name">quantity</span> (<span class="object-type">int | float</span>) &mdash; Quantity to be traded
    </li>
    <li>
    <span class="arg-name">stop_price</span> (<span class="object-type">float</span>) &mdash; Initial stop price at which the order should be triggered
    </li>
    <li>
    <span class="arg-name">trailing_amount</span> (<span class="object-type">float</span>) &mdash; The trailing amount to be used to update the stop price
    </li>
    <li>
    <span class="arg-name">trailing_as_percentage</span> (<span class="object-type">bool</span>) &mdash; is a percentage or an absolute currency value
    </li>
    <li>
    <span class="arg-name">tag</span> (<span class="object-type">str, optional</span>) &mdash; is a percentage or an absolute currency value
    </li>
    <li>
    <span class="arg-name">order_properties</span> (<span class="object-type">IOrderProperties, optional</span>) &mdash; Optional string data tag for the order
    </li>
</ul>
<div class="subsection-header">Returns:</div>
<p class="subsection-content">The order ticket instance.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#OrderTicket">OrderTicket</a></p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>benchmark</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1450">[source]</a></div>
<div class="subsection-content">
<p>Benchmark</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Benchmark</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">IBenchmark</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>default_order_properties</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L480">[source]</a></div>
<div class="subsection-content">
<p>Gets the default order properties</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the default order properties</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">IOrderProperties</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>trade_builder</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L410">[source]</a></div>
<div class="subsection-content">
<p>Gets the Trade Builder to generate trades from executions</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the Trade Builder to generate trades from executions</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">ITradeBuilder</p>
</div>

<div class="code-snippet"><span class="object-type">property</span> <code>transactions</code><a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Trading.cs#L40">[source]</a></div>
<div class="subsection-content">
<p>Transaction Manager - Process transaction fills and order management.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Transaction Manager - Process transaction fills and order management.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">SecurityTransactionManager</p>
</div>

<style>
.code-source        { color: grey; float: right }
.object-type        { font-style: italic; }
.arg-name           { font-weight: bold; }
.subsection-header  { font-weight: bold; background-color: lightgray; }
.subsection-content { margin-left: 10px; }
</style>
