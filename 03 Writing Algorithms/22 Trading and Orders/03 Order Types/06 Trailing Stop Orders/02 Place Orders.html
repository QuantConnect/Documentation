<p>To send a trailing stop order, call the <code class="csharp">TrailingStopOrder</code><code class="python">trailing_stop_order</code> method and provide a <code>Symbol</code>, quantity, trailing amount, and the trailing type. You can also provide a tag and <a href="/docs/v2/writing-algorithms/trading-and-orders/order-properties">order properties</a> to the <code class="csharp">TrailingStopOrder</code><code class="python">trailing_stop_order</code> method. If you do not have sufficient capital for the order, it is rejected.</p>

<div class="section-example-container">
<pre class="csharp">TrailingStopOrder(symbol, quantity, trailingAmount, trailingAsPercentage, tag, orderProperties);</pre>
<pre class="python">self.trailing_stop_order(symbol, quantity, trailing_amount, trailing_as_percentage, tag, order_properties)</pre>
</div>

<p>If you set the <code class='csharp'>trailingAsPercentage</code><code class='python'>trailing_as_percentage</code> parameter to <code class="csharp">false</code><code class="python">False</code>, the <code class='csharp'>trailingAmount</code><code class='python'>trailing_amount</code> is denominated in the asset's <a href='/docs/v2/writing-algorithms/securities/key-concepts#03-Quote-Currency'>quote currency</a>.</p>

<h4>Buy With a Currency-Based Trailing Stop</h4>
<p>To buy an asset with a currency-based trailing stop order, pass the trailing amount and disable the <code class='csharp'>trailingAsPercentage</code><code class='python'>trailing_as_percentage</code> parameter.</p>
<div class="section-example-container">
<pre class="csharp">// Buy 1 share of SPY through a trailing stop order that starts $30 above the current price
TrailingStopOrder("SPY", 1, 30m, false);</pre>
<pre class="python"># Buy 1 share of SPY through a trailing stop order that starts $30 above the current price
self.trailing_stop_order("SPY", 1, 30, False)</pre>
</div>
<img src="https://cdn.quantconnect.com/i/tu/buy-dollar-2.webp" class="docs-image" alt="When the asset currently trades at $440, the stop price of the buy stop market order is set at $470 and a trailing amount of $30. The order fills when the price trades up to $402.82.">

<h4>Buy With a Percent-Based Trailing Stop</h4>
<p>To buy an asset with a percent-based trailing stop order, pass the trailing percent and enable the <code class='csharp'>trailingAsPercentage</code><code class='python'>trailing_as_percentage</code> parameter.</p>
<div class="section-example-container">
<pre class="csharp">// Buy 1 share of SPY through a trailing stop order that starts 7% above the current price
TrailingStopOrder("SPY", 1, 0.07m, true);</pre>
<pre class="python"># Buy 1 share of SPY through a trailing stop order that starts 7% above the current price
self.trailing_stop_order("SPY", 1, 0.07, True)</pre>
</div>
<img src="https://cdn.quantconnect.com/i/tu/buy-percent-2.webp" class="docs-image" alt="When the asset currently trades at $440, the stop price of the buy stop market order is set at $470 and a trailing amount of 7%. The order fills when the price trades up to $398.92.">

<h4>Sell With a Currency-Based Trailing Stop</h4>
<p>To sell an asset with a currency-based trailing stop order, pass the trailing amount and disable the <code class='csharp'>trailingAsPercentage</code><code class='python'>trailing_as_percentage</code> parameter.</p>
<div class="section-example-container">
<pre class="csharp">// Sell 1 share of SPY through a trailing stop order that starts $20 below the current price
TrailingStopOrder("SPY", -1, 20m, false)</pre>
<pre class="python"># Sell 1 share of SPY through a trailing stop order that starts $20 below the current price
self.trailing_stop_order("SPY", -1, 20, False)</pre>
</div>
<img src="https://cdn.quantconnect.com/i/tu/sell-dollar-2.webp" class="docs-image" alt="When the asset currently trades at $415, the stop price of the sell stop market order is set at $395 and a trailing amount of $20. The order fills when the price trades down to $420.49.">

<h4>Sell With a Percent-Based Trailing Stop</h4>
<p>To sell an asset with a percent-based trailing stop order, pass the trailing percent and enable the <code class='csharp'>trailingAsPercentage</code><code class='python'>trailing_as_percentage</code> parameter.</p>
<div class="section-example-container">
<pre class="csharp">// Sell 1 share of SPY through a trailing stop order that starts 5% above the current price
TrailingStopOrder("SPY", -1, 0.05m, true);</pre>
<pre class="python"># Sell 1 share of SPY through a trailing stop order that starts 5% above the current price
self.trailing_stop_order("SPY", -1, 0.05, True)</pre>
</div>
<img src="https://cdn.quantconnect.com/i/tu/sell-percent-2.webp" class="docs-image" alt="When the asset currently trades at $415, the stop price of the sell stop market order is set at $395 and a trailing amount of 5%. The order fills when the price trades down to $418.46.">

<h4>Custom Starting Prices</h4>
<p>In the preceding examples, LEAN calculates the stop price based on the current security price. If you want the order to start with a stop price closer to the security price than the <code class='csharp'>trailingAmount</code><code class='python'>trailing_amount</code>, pass a <code class="csharp">stopPrice</code><code class="python">stop_price</code> parameter to the <code class="csharp">TrailingStopOrder</code><code class="python">trailing_stop_order</code> method.</p>
<div class="section-example-container">
    <pre class="csharp">TrailingStopOrder(symbol, quantity, stopPrice, trailingAmount, trailingAsPercentage, tag, orderProperties);</pre>
    <pre class="python">self.trailing_stop_order(symbol, quantity, stopPrice, trailingAmount, trailingAsPercentage, tag, orderProperties)</pre>
</div>
