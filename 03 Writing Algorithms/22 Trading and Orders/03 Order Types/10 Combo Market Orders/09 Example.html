<p>The following backtest verifies the <code class="csharp">ComboMarketOrder</code><code class="python">combo_market_order</code> behavior. The algorithm buys one contract and sells one contract at the same time. The following table shows the two trades in the backtest:</p>

<table class="qc-table table" id="research-nodes-table">
    <thead>
        <tr>
            <th>Time</th>
            <th>Symbol</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Type</th>
            <th>Status</th>
            <th>Value</th>
            <th>Tag</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>2015-12-24T09:31:00Z</td>
            <td>GOOG 16011SC00745000</td>
            <td>16.90</td>
            <td>1</td>
            <td>Buy</td>
            <td>Filled</td>
            <td>16.90</td>
            <td></td>
        </tr>
        <tr>
            <td>2015-12-24T09:31:00Z</td>
            <td>GOOG 160115C00747500</td>
            <td>14.20</td>
            <td>-1</td>
            <td>Sell</td>
            <td>Filled</td>
            <td>-14.20</td>
            <td></td>
        </tr>
    </tbody>
</table>

<style>
#research-nodes-table td:nth-child(3), 
#research-nodes-table th:nth-child(3), 
#research-nodes-table td:nth-child(4), 
#research-nodes-table th:nth-child(4), 
#research-nodes-table td:nth-child(7), 
#research-nodes-table th:nth-child(7) {
    text-align: right;
}
</style>

<p>On December 24, 2015, the algorithm buys GOOG 16011SC00745000 at $16.90 and sells GOOG 160115C00747500 at $14.20. The <a href="/docs/v2/writing-algorithms/reality-modeling/trade-fills/supported-models/immediate-model#11-Combo-Market-Orders">fill model</a> fills the buy order at the ask close price and fills the sell order at the bid close price.</p>

<p>To reproduce these results, backtest the following algorithm:</p>

<div class="python"><div class="qc-embed-frame" style="display: inline-block; position: relative; width: 100%; min-height: 100px; min-width: 300px;"><div class="qc-embed-dummy" style="padding-top: 56.25%;"></div><div class="qc-embed-element" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"><iframe class="qc-embed-backtest" src="https://www.quantconnect.com/terminal/processCache?request=embedded_backtest_ff1917851c8bcab375ca363f22cfc255.html" style="max-width: calc(100vw - 30px); max-height: 100vw; overflow: hidden;" scrolling="no" width="100%" height="100%"></iframe></div></div></div>

<div class="csharp"><div class="qc-embed-frame" style="display: inline-block; position: relative; width: 100%; min-height: 100px; min-width: 300px;"><div class="qc-embed-dummy" style="padding-top: 56.25%;"></div><div class="qc-embed-element" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;"><iframe class="qc-embed-backtest" src="https://www.quantconnect.com/terminal/processCache?request=embedded_backtest_560c5fdebfa5380285f45ddf8b57e05e.html" style="max-width: calc(100vw - 30px); max-height: 100vw; overflow: hidden;" scrolling="no" width="100%" height="100%"></iframe></div></div></div>

<p class="csharp">For more examples, see the following algorithms:</p>

<div class="csharp">
  <div class="example-fieldset"> 
    <div class="example-legend">Demonstration Algorithms</div>
    
    <a class="csharp example-algorithm-link" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm.CSharp/ComboMarketOrderAlgorithm.cs" target="_BLANK">
        ComboMarketOrderAlgorithm.cs <span class="badge-csharp pull-right">C#</span>
    </a>
  </div>
</div>