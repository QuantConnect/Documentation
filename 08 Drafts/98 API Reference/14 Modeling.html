<h4 id="Modeling">Modeling</h4><div class="code-snippet"><pre>on_margin_call(<span class="object-type">requests</span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1097">[source]</a></pre></div>
<div class="subsection-content">
<p>Margin call event handler. This method is called right before the margin call orders are placed in the market.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">requests</span> (<span class="object-type">List[SubmitOrderRequest]</span>) &mdash; The orders to be executed to bring this algorithm within margin limits
    </li>
</ul>

</div>

<div class="code-snippet"><pre>on_margin_call_warning(<span class="object-type"></span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1106">[source]</a></pre></div>
<div class="subsection-content">
<p>Margin call warning event handler. This method is called when Portfolio.MarginRemaining is under 5% of your Portfolio.TotalPortfolioValue</p>


</div>

<div class="code-snippet"><pre>set_brokerage_message_handler(<span class="object-type">handler</span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Python.cs#L1210">[source]</a></pre></div>
<div class="subsection-content">
<p>Sets the implementation used to handle messages from the brokerage. The default implementation will forward messages to debug or error and when a F:QuantConnect.Brokerages.BrokerageMessageType.Error occurs, the algorithm is stopped.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">handler</span> (<span class="object-type">PyObject</span>) &mdash; The message handler to use
    </li>
</ul>

</div>

<div class="code-snippet"><pre>set_brokerage_message_handler(<span class="object-type">handler</span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1330">[source]</a></pre></div>
<div class="subsection-content">
<p>Sets the implementation used to handle messages from the brokerage. The default implementation will forward messages to debug or error and when a F:QuantConnect.Brokerages.BrokerageMessageType.Error occurs, the algorithm is stopped.</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">handler</span> (<span class="object-type">QuantConnect.Brokerages.IBrokerageMessageHandler</span>) &mdash; The message handler to use
    </li>
</ul>

</div>

<div class="code-snippet"><pre>set_brokerage_model(<span class="object-type">model</span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Python.cs#L1191">[source]</a></pre></div>
<div class="subsection-content">
<p>Sets the brokerage to emulate in backtesting or paper trading. This can be used for brokerages that have been implemented in LEAN</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">model</span> (<span class="object-type">PyObject</span>) &mdash; The brokerage model to use
    </li>
</ul>

</div>

<div class="code-snippet"><pre>set_brokerage_model(<span class="object-type">brokerage, account_type=0</span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1285">[source]</a></pre></div>
<div class="subsection-content">
<p>Sets the brokerage to emulate in backtesting or paper trading. This can be used for brokerages that have been implemented in LEAN</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">brokerage</span> (<span class="object-type"><a href="#BrokerageName">QuantConnect.Brokerages.BrokerageName</a></span>) &mdash; The brokerage to emulate
    </li>
    <li>
    <span class="arg-name">account_type</span> (<span class="object-type"><a href="#AccountType">QuantConnect.AccountType</a>, optional</span>) &mdash; The brokerage to emulate
    </li>
</ul>

</div>

<div class="code-snippet"><pre>set_brokerage_model(<span class="object-type">model</span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1296">[source]</a></pre></div>
<div class="subsection-content">
<p>Sets the brokerage to emulate in backtesting or paper trading. This can be used for brokerages that have been implemented in LEAN</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">model</span> (<span class="object-type">QuantConnect.Brokerages.IBrokerageModel</span>) &mdash; The brokerage model to use
    </li>
</ul>

</div>

<div class="code-snippet"><pre>set_risk_free_interest_rate_model(<span class="object-type">model</span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.Python.cs#L1226">[source]</a></pre></div>
<div class="subsection-content">
<p>Sets the risk free interest rate model to be used in the algorithm</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">model</span> (<span class="object-type">PyObject</span>) &mdash; The risk free interest rate model to use
    </li>
</ul>

</div>

<div class="code-snippet"><pre>set_risk_free_interest_rate_model(<span class="object-type">model</span>)<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L1341">[source]</a></pre></div>
<div class="subsection-content">
<p>Sets the risk free interest rate model to be used in the algorithm</p>
<div class="subsection-header">Parameters:</div>
<ul class="subsection-content">
    <li>
    <span class="arg-name">model</span> (<span class="object-type">QuantConnect.Data.IRiskFreeInterestRateModel</span>) &mdash; The risk free interest rate model to use
    </li>
</ul>

</div>

<div class="code-snippet"><pre><span class="object-type">property</span> brokerage_message_handler<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L350">[source]</a></pre></div>
<div class="subsection-content">
<p>Gets the brokerage message handler used to decide what to do with each message sent from the brokerage</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the brokerage message handler used to decide what to do with each message sent from the brokerage</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">QuantConnect.Brokerages.IBrokerageMessageHandler</p>
</div>

<div class="code-snippet"><pre><span class="object-type">property</span> brokerage_model<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L314">[source]</a></pre></div>
<div class="subsection-content">
<p>Gets the brokerage model - used to model interactions with specific brokerages.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the brokerage model - used to model interactions with specific brokerages.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">QuantConnect.Brokerages.IBrokerageModel</p>
</div>

<div class="code-snippet"><pre><span class="object-type">property</span> brokerage_name<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L339">[source]</a></pre></div>
<div class="subsection-content">
<p>Gets the brokerage name.</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the brokerage name.</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content"><a href="#BrokerageName">QuantConnect.Brokerages.BrokerageName</a></p>
</div>

<div class="code-snippet"><pre><span class="object-type">property</span> risk_free_interest_rate_model<a class="code-source" href="https://github.com/QuantConnect/Lean/blob/master/Algorithm/QCAlgorithm.cs#L360">[source]</a></pre></div>
<div class="subsection-content">
<p>Gets the risk free interest rate model used to get the interest rates</p>

<div class="subsection-header">Returns:</div>
<p class="subsection-content">Gets the risk free interest rate model used to get the interest rates</p>
<div class="subsection-header">Return type:</div>
<p class="subsection-content">QuantConnect.Data.IRiskFreeInterestRateModel</p>
</div>

<style>
.code-source        { color: grey; float: right }
.object-type        { font-style: italic; }
.arg-name           { font-weight: bold; }
.subsection-header  { font-weight: bold; background-color: lightgray; }
.subsection-content { margin-left: 10px; }
</style>
