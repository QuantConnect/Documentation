#
#   Tests for Code Blocks
#

FROM python:3.11-slim

# Set environment variables to avoid interactive prompts during installation
ENV DEBIAN_FRONTEND=noninteractive

# Install necessary packages and PHP
RUN apt-get update
RUN apt-get install -y php python3 python3-venv python3-dev git curl unzip ca-certificates
RUN apt-get clean
RUN rm -rf /var/lib/apt/lists/*

# Install SDK 9 to /usr/share/dotnet and expose it
RUN curl -fsSL https://dot.net/v1/dotnet-install.sh -o /tmp/dotnet-install.sh \
 && bash /tmp/dotnet-install.sh --channel 9.0 --install-dir /usr/share/dotnet --quality ga \
 && ln -s /usr/share/dotnet/dotnet /usr/bin/dotnet

# Upgrade pip and install Python dependencies
RUN apt-get update && \
    apt-get install -y python3-pip
RUN pip install --upgrade \
    beautifulsoup4==4.12.3 \
    ratelimit==2.2.1 \
    requests==2.31.0 \
    mypy \
    quantconnect-stubs \
    datetime \
    numpy \
    pandas \
    pandas-stubs \
    matplotlib \
    huggingface_hub

# Set the working directory to the Documentation directory
WORKDIR /app/Documentation

# Copy the necessary files into the container
COPY ../.. .
