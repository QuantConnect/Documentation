<p>
    Follow these steps to start local debugging for C# in Visual Studio:
</p>

<ol>
    <li>Follow the <a href="/docs/v2/lean-cli/projects/autocomplete#04-C-and-Visual-Studio">How to set up local autocomplete for C# in Visual Studio</a> tutorial.</li>
    <li>Open the project containing the <span class='private-file-name'>Main.cs</span> file in a new Visual Studio window. It is important that you open the project directory itself, not your <a href='/docs/v2/lean-cli/initialization/directory-structure#02-lean-init'>CLI root directory</a>.</li>
    <li>Run the <code>lean backtest</code> command with the <code>--debug vsdbg</code> option and wait until the CLI tells you to attach to the debugger.
<div class="cli section-example-container">
<pre>$ lean backtest "My Project" --debug vsdbg
20210423 13:50:54.634 TRACE:: DebuggerHelper.Initialize(): waiting for debugger to attach...</pre>
</div>
    </li>
    <li>In Visual Studio, open the process selector using <span class='menu-name'>Debug > Attach to Process...</span>.</li>
    <li>Select <span class='button-name'>Docker (Linux Container)</span> as the connection type.</li>
    <li>Select <span class='button-name'>lean_cli_vsdbg</span> as connection target.</li>
    <li>Double-click on the process named <span class='button-name'>dotnet</span>.</li>
    <li>Tick the checkbox in front of <span class='box-name'>Managed (.NET Core for Unix)</span> and click <span class='button-name'>OK</span> to start debugging.</li>
</ol>

<p>
    After finishing C# debugging with Visual Studio you will see a message saying "The debug adapter exited unexpectedly.".
    You can safely ignore this message.
</p>
